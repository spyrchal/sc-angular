/**
 * @license sc-angular v0.2.2
 * (c) 2015 Sebis
 * License: Sebis Proprietary
 * https://bitbucket.org/sebischair/sc-angular
 */
!function(){angular.module("sociocortex",[]);var a="131.159.30.153",b="http://"+a;angular.module("sociocortex").value("scConnection",{baseUri:b,apiVersion:"0.1"}),angular.module("sociocortex").config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self",b+"/api/**"])}])}(),function(){angular.module("sociocortex").service("scCore",["$http","$q","scConnection",function(a,b,c){function d(c){return b(function(b,d){if(!angular.isObject(c)||!angular.isObject(c.auth)||!angular.isString(c.httpMethod)||!angular.isString(c.path)||!angular.isString(c.auth.user)||!angular.isString(c.auth.password)||c.params&&!angular.isObject(c.params)||c.data&&!angular.isObject(c.data))return console.trace(),console.error("sociocortex#scRequest: invalid options argument",c),d({error:"Validation Failed",message:"invalid options argument"});console.debug(c.httpMethod+" "+h(c.path));var e=f(c.auth.user,c.auth.password);return a({headers:e,url:h(c.path),method:c.httpMethod,params:c.params,data:c.data}).then(b,d)})}function e(a){return b(function(b,c){return angular.isObject(a.mxlMethodParameters)||(a.mxlMethodParameters={expression:a.mxlMethodParameters||""}),d({httpMethod:a.httpMethod,path:g(i(a.context),"mxl"),auth:a.auth,params:{method:a.mxlMethod},data:a.mxlMethodParameters}).then(b,c)})}function f(a,b){return{Authorization:"Basic "+window.btoa(a+":"+b),"X-Requested-With":"sc-angular"}}function g(a,b){return"/"===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),"/"===b.charAt(0)&&(b=b.substr(1,c.baseUri.length-1)),a+"/"+b}function h(a){var b=g(c.baseUri,"api/"+c.apiVersion);return g(b,a)}function i(a){return angular.isObject(a)?a.entityId?"entities/"+a.entityId:a.typeId?"types/"+a.typeId:a.workspaceId?"workspaces/"+a.workspaceId:"":"workspaces/"+a}return{scRequest:d,mxlRequest:e}}])}(),function(){var a="attributes",b="entities",c="groups",d="users",e="types",f="workspaces";angular.module("sociocortex").service("scCrud",["$q","scCore",function(g,h){function i(a,c){var d=angular.isString(c)?e+"/"+c+"/"+b:b;return v(a,d)}function j(a,c){return u(a,b,c)}function k(a){for(var b,c=0;c<a.length;c++)if(b=a[c],!angular.isArray(b.values)||!angular.isString(b.name)||!angular.isString(b.type))return!1;return!0}function l(a,c,d,i){return g(function(g,j){var l=w([[a,angular.isObject,"auth is an object"],[c,angular.isString,"workspaceId is a string"],[d,angular.isString,"typeId is a string"],[i,angular.isObject,"entityData is an object"],[i.name,angular.isString,"entityData.name is a string"],[i.attributes,angular.isArray,"entityData.attributes is an array"],[i.attributes,k,"attributes are 3-tuples of name, values, type"]]);return l?j(l):(i.type={uid:e+"/"+d},i.workspace={uid:f+"/"+c},void h.scRequest({httpMethod:"POST",auth:a,path:b,data:i}).then(function(a){g(a.data)},j))})}function m(a,c){return g(function(d,e){var f=w([[a,angular.isObject,"auth is an object"],[c,angular.Object,"entity is an object"],[c.uid,angular.Object,"entity has a uid"],[c.name,angular.String,"entity has a name"],[c.workspace,angular.Object,"entity has a workspace"],[c.attributes,angular.isArray,"entity.attributes is an array"]]);return f?e(f):void h.scRequest({httpMethod:"POST",auth:a,path:b+"/"+c.id,data:c}).then(function(a){d(a.data)},e)})}function n(a,c){return g(function(d,e){h.scRequest({httpMethod:"DELETE",auth:a,path:b+"/"+c.id}).then(function(a){d(!0)},e)})}function o(a){return v(a,c)}function p(a){return v(a,d)}function q(a){return v(a,d+"/me")}function r(a,b,c){return g(function(d,h){var i=angular.isString(b)?f+"/"+b+"/"+e:e;v(a,i).then(function(b){if(!c)return d(b);for(var e,f=[],i=0;i<b.length;i++)e=b[i].id,f.push(t(a,e));g.all(f).then(function(a){for(i=0;i<b.length;i++)b[i].attributes=a[i].data;return d(b)},h)},h)})}function s(a,b,c){return g(function(d,f){var g=w([[a,angular.isObject,"auth is an object"],[b,angular.isString,"typeId is a string"]]);return g?f(g):void u(a,e,b).then(function(e){return c?void t(a,b).then(function(a){return e.attributes=a.data,d(e)},f):d(e)},f)})}function t(b,c){return h.scRequest({httpMethod:"GET",path:e+"/"+c+"/"+a,auth:b})}function u(a,b,c){return g(function(d,e){var f=w([[c,angular.isString,"id is a string"]]);return f?e(f):(b=b+"/"+c,void v(a,b).then(d,e))})}function v(a,b){return g(function(c,d){var e=w([[a,angular.isObject,"auth is an object"],[b,angular.isString,"path is a string"]]);return e?d(e):void h.scRequest({httpMethod:"GET",path:b,auth:a}).then(function(a){return c(a.data)},d)})}function w(a){for(var b,c,d,e=0;e<a.length;e++){if(c=a[e][1],d=a[e][2],!angular.isDefined(a[e][0]))return{error:"Missing Parameter",message:d||"no details provided"};if(b=a[e][0],!c(b))return console.trace(),console.error("validation failed",a),{error:"Invalid Parameter",message:d||"no details provided"}}return null}return{entities:{findAll:i,findOne:j,create:l,update:m,remove:n},groups:{findAll:o},users:{findAll:p,findSelf:q},types:{findAll:r,findOne:s}}}])}(),function(){angular.module("sociocortex").service("scMxl",["$cacheFactory","$q","scCore",function(a,b,c){function d(a,d){return b(function(b,e){var f=g.get(d);return f?b(f):void c.mxlRequest({httpMethod:"GET",auth:a,context:{workspaceId:d},mxlMethod:"autoComplete"}).then(function(a){return g.put(d,a),b(a)},e)})}function e(a,b,d){return c.mxlRequest({httpMethod:"POST",auth:a,context:d,mxlMethod:"query",mxlMethodParameters:b})}function f(a,b,d){return c.mxlRequest({httpMethod:"POST",auth:a,context:d,mxlMethod:"validate",mxlMethodParameters:b})}var g=a("mxlAutoCompleteCache");return{autoComplete:d,query:e,validate:f}}])}();