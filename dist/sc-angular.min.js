/**
 * @license sc-angular v0.6.4
 * (c) 2015 Sebis
 * License: Sebis Proprietary
 * https://bitbucket.org/sebischair/sc-angular
 */
!function(){angular.module("sociocortex",[]);var a="131.159.30.153",b="http://"+a;angular.module("sociocortex").value("scConnection",{baseUri:b,apiVersion:"0.1"}),angular.module("sociocortex").config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self",b+"/api/**"])}])}(),function(){angular.module("sociocortex").service("scCore",["$http","$q","scConnection",function(a,b,c){function d(c){return b(function(b,d){if(!angular.isObject(c)||!angular.isObject(c.auth)||!angular.isString(c.httpMethod)||!angular.isString(c.path)||!angular.isString(c.auth.user)||!angular.isString(c.auth.password)||c.params&&!angular.isObject(c.params)||c.data&&!angular.isObject(c.data))return console.trace(),console.error("sociocortex#scRequest: invalid options argument",c),d({error:"Validation Failed",message:"invalid options argument"});var e=f(c.auth.user,c.auth.password);return a({headers:e,url:h(c.path),method:c.httpMethod,params:c.params,data:c.data}).then(b,d)})}function e(a){return b(function(b,c){return angular.isObject(a.mxlMethodParameters)||(a.mxlMethodParameters={expression:a.mxlMethodParameters||""}),d({httpMethod:a.httpMethod,path:g(i(a.context),"mxl"),auth:a.auth,params:{method:a.mxlMethod},data:a.mxlMethodParameters}).then(b,c)})}function f(a,b){return{Authorization:"Basic "+window.btoa(a+":"+b)}}function g(a,b){return"/"===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),"/"===b.charAt(0)&&(b=b.substr(1,c.baseUri.length-1)),a+"/"+b}function h(a){var b=g(c.baseUri,"api/"+c.apiVersion);return g(b,a)}function i(a){return angular.isObject(a)?a.entityId?"entities/"+a.entityId:a.typeId?"types/"+a.typeId:a.workspaceId?"workspaces/"+a.workspaceId:"":"workspaces/"+a}return{scRequest:d,mxlRequest:e}}])}(),function(){var a="entities",b="groups",c="properties",d="users",e="types",f="workspaces";angular.module("sociocortex").service("scCrud",["$q","scCore","scUtils",function(g,h,i){function j(b,c,d){return d=angular.isObject(d)?d:{},g(function(f,h){var j=angular.isString(c)?e+"/"+c+"/"+a:a;return F(b,j).then(function(a){return d.includeDetails||d.resolveReferences?k(b,a).then(function(a){if(d.resolveReferences){for(var c=[],e=0;e<a.length;e++)c.push(n(b,a[e]));return g.all(c).then(function(a){return f(d.unwrap?i.unwrapEntities(a):a)},h)}return f(d.unwrap?i.unwrapEntities(a):a)},h):f(a)},h)})}function k(a,b){for(var c=[],d=0;d<b.length;d++)b[d].id=b[d].id||b[d].uid.split("/")[1],c.push(l(a,b[d].id));return g.all(c)}function l(b,c,d){return d=angular.isObject(d)?d:{},g(function(e,f){var g;g=d.resolveReferences?m(b,c):E(b,a,c),g.then(function(a){return e(d.unwrap?i.unwrapEntity(a):a)},f)})}function m(b,c,d){return d=d||[],g(function(e,f){E(b,a,c).then(function(a){n(b,a,d).then(e,f)},f)})}function n(a,b,c){return c=c||[],g(function(d,e){b.id=b.id||b.uid.split("/")[1],c.push(b.id);for(var f,h={},i=0;i<b.attributes.length;i++)if(f=b.attributes[i],"link"===f.type){var j=f.values;h[i.toString()]=o(a,j,c)}g.all(h).then(function(a){for(var c in a)if(a.hasOwnProperty(c)){var e=a[c];b.attributes[parseInt(c)].resolved=e}d(b)},e)})}function o(a,b,c){return g(function(d,e){for(var f,h,i,j=[],k=0;k<b.length;k++){f=b[k].uid,i=f.split("/")[0],h=f.split("/")[1];var l;c.indexOf(h)>-1?l=p(f,h):"entities"===i?l=m(a,h,c):"users"===i&&(l=x(a,h)),l&&j.push(l)}g.all(j).then(d,e)})}function p(a,b){return g(function(c){c({uid:a,id:b,isCircular:!0})})}function q(a){for(var b,c=0;c<a.length;c++)if(b=a[c],!angular.isArray(b.values)||!angular.isString(b.name)||angular.isDefined(b.type)&&!angular.isString(b.type))return!1;return!0}function r(b,c,d,j,k){return k=angular.isObject(k)?k:{},angular.isArray(j.attributes)||(j.attributes=i.wrapAttributes(j.attributes)),g(function(g,l){var m=G([[b,angular.isObject,"auth is an object"],[c,angular.isString,"workspaceId is a string"],[d,angular.isString,"typeId is a string"],[j,angular.isObject,"entityData is an object"],[j.name,angular.isString,"entityData.name is a string"],[j.attributes,angular.isArray,"entityData.attributes is an array"],[j.attributes,q,"attributes are 3-tuples of name, values, type"]]);return m?l(m):(j.type={uid:e+"/"+d},j.workspace={uid:f+"/"+c},void h.scRequest({httpMethod:"POST",auth:b,path:a,data:j}).then(function(a){return g(k.unwrap?i.unwrapEntity(a.data):a.data)},l))})}function s(b,c,d){return d=angular.isObject(d)?d:{},angular.isArray(c.attributes)||(c.attributes=i.wrapAttributes(c.attributes)),g(function(e,f){var g=G([[b,angular.isObject,"auth is an object"],[c,angular.isObject,"entity is an object"],[c.type,angular.isObject,"type is an object"],[c.uid,angular.isString,"entity has a uid"],[c.name,angular.isString,"entity has a name"],[c.workspace,angular.isObject,"entity has a workspace"],[c.attributes,angular.isArray,"entity.attributes is an array"],[c.attributes,q,"attributes are 3-tuples of name, values, type"]]);return g?f(g):void h.scRequest({httpMethod:"PUT",auth:b,path:c.uid||a+"/"+c.id,data:c}).then(function(a){return e(d.unwrap?i.unwrapEntity(a.data):a.data)},f)})}function t(b,c){return g(function(d,e){h.scRequest({httpMethod:"DELETE",auth:b,path:c.uid||a+"/"+c.id}).then(function(a){d(!0)},e)})}function u(a){return F(a,b)}function v(a){return F(a,d)}function w(a){return F(a,d+"/me")}function x(a,b){return E(a,d,b)}function y(a,b,c){return c=angular.isObject(c)?c:{},g(function(d,h){var i=angular.isString(b)?f+"/"+b+"/"+e:e;F(a,i).then(function(b){if(!c.includeDetails)return d(b);for(var e,f=[],i={resolveProperties:c.resolveProperties},j=0;j<b.length;j++)e=b[j].uid.split("/")[1],f.push(z(a,e,i));g.all(f).then(function(a){for(j=0;j<a.length;j++)null===a[j]&&a.splice(j,1);return d(a)},h)},h)})}function z(a,b,c){return c=angular.isObject(c)?c:{},g(function(d,f){var g=G([[a,angular.isObject,"auth is an object"],[b,angular.isString,"typeId is a string"]]);return g?f(g):void E(a,e,b).then(function(b){return c.resolveProperties&&0!==b.properties.length?void A(a,b.properties).then(function(a){return b.properties=a,d(b)},f):d(b)},function(a){return a.data&&"ClassCastException"===a.data.cause?d(null):f(a)})})}function A(a,b){return g(function(c,d){for(var e,f=[],h=0;h<b.length;h++)e=b[h].uid.split("/")[1],f.push(B(a,e));g.all(f).then(function(a){for(h=0;h<a.length;h++)null===a[h]&&a.splice(h,1);return c(a)},d)})}function B(a,b){return g(function(d,e){h.scRequest({httpMethod:"GET",path:c+"/"+b,auth:a}).then(function(a){return d(a.data)},function(a){return a.data&&"NullPointerException"===a.data.cause?d(null):e(a)})})}function C(a){return F(a,f)}function D(a,b){return E(a,f,b)}function E(a,b,c){return g(function(d,e){var f=G([[c,angular.isString,"id is a string"]]);return f?e(f):(b=b+"/"+c,void F(a,b).then(d,e))})}function F(a,b){return g(function(c,d){var e=G([[a,angular.isObject,"auth is an object"],[b,angular.isString,"path is a string"]]);return e?d(e):void h.scRequest({httpMethod:"GET",path:b,auth:a}).then(function(a){return c(a.data)},d)})}function G(a){for(var b,c,d,e=0;e<a.length;e++){if(c=a[e][1],d=a[e][2],!angular.isDefined(a[e][0]))return{error:"Missing Parameter",message:d||"no details provided"};if(b=a[e][0],!c(b))return console.trace(),console.error("validation failed",a[e]),{error:"Invalid Parameter",message:d||"no details provided"}}return null}return{entities:{findAll:j,findOne:l,create:r,update:s,remove:t},groups:{findAll:u},users:{findAll:v,findSelf:w,findOne:x},types:{findAll:y,findOne:z},workspaces:{findAll:C,findOne:D}}}])}(),function(){angular.module("sociocortex").service("scMxl",["$cacheFactory","$q","scCore",function(a,b,c){function d(a,d){return b(function(b,e){var f=g.get(d);return f?b(f):void c.mxlRequest({httpMethod:"GET",auth:a,context:{workspaceId:d},mxlMethod:"autoComplete"}).then(function(a){return g.put(d,a),b(a)},e)})}function e(a,b,d){return c.mxlRequest({httpMethod:"POST",auth:a,context:d,mxlMethod:"query",mxlMethodParameters:b})}function f(a,b,d){return c.mxlRequest({httpMethod:"POST",auth:a,context:d,mxlMethod:"validate",mxlMethodParameters:b})}var g=a("mxlAutoCompleteCache");return{autoComplete:d,query:e,validate:f}}])}(),function(){angular.module("sociocortex").service("scUtils",[function(){function a(b){b=angular.isArray(b)?b:[];for(var c,d={},e=0;e<b.length;e++){if(c=b[e],"number"===c.type)for(var f=0;f<c.values.length;f++)c.values[f]=parseInt(c.values[f]);else if("date"===c.type)for(var f=0;f<c.values.length;f++){var g=c.values[f].split("."),h=g[2]+"-"+g[1]+"-"+g[0];c.values[f]=new Date(h)}else if("link"===c.type&&c.resolved){c.values=c.resolved;for(var f=0;f<c.values.length;f++)c.values[f].attributes=a(c.values[f].attributes)}1===c.values.length?d[c.name]=c.values[0]:d[c.name]=c.values}return d}function b(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var d={name:c},e=a[c],f=[];e instanceof Array||(e=[e]);var g=e[0];if(void 0===g)d.type="link",d.values=[];else if(angular.isDate(g)){for(var h=0;h<e.length;h++){var i=e[h].getDate(),j=e[h].getMonth()+1,k=e[h].getFullYear(),l=(10>i?"0"+i:i)+"."+(10>j?"0"+j:j)+"."+k;f.push(l)}d.type="date",d.values=f}else if(angular.isNumber(g)){for(var h=0;h<e.length;h++)f.push(e[h].toString());d.type="number",d.values=f}else if(angular.isObject(g)&&(angular.isString(g.uid)||angular.isString(g.id))){for(var m=g.hasOwnProperty("lastLoginDate")?"users/":"entities/",h=0;h<e.length;h++)f.push({uid:e[h].uid||m+e[h].id,name:e[h].name});d.type="link",d.values=f}else d.type="text",d.values=e;b.push(d)}return b}function c(a){for(var b=[],c=0;c<a.length;c++)b.push(d(a[c]));return b}function d(b){return b.attributes=a(b.attributes),b}function e(a){var b,c=new Date(a.replace(" ","T"));return b=c.getMonth()>2&&c.getMonth()<10?120:60,c.setTime(c.getTime()-60*b*1e3),c}return{unwrapAttributes:a,wrapAttributes:b,unwrapEntity:d,unwrapEntities:c,parseDate:e}}])}();